<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>闫文喜的个人博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="闫文喜，闫文喜的个人博客，web前端博客，前端博客">
<meta property="og:type" content="website">
<meta property="og:title" content="闫文喜的个人博客">
<meta property="og:url" content="http://yanwenxi.github.io/index.html">
<meta property="og:site_name" content="闫文喜的个人博客">
<meta property="og:description" content="闫文喜，闫文喜的个人博客，web前端博客，前端博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="闫文喜的个人博客">
<meta name="twitter:description" content="闫文喜，闫文喜的个人博客，web前端博客，前端博客">
  
    <link rel="alternative" href="/atom.xml" title="闫文喜的个人博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
      <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/head.jpg" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/" title="Hi Mate">Wenxi Yan</a></h1>
        </hgroup>

        
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/Home">博客首页</a></li>
                        
                            <li><a href="/">文章页</a></li>
                        
                            <li><a href="/about">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=278999494@qq.com" title="mail">mail</a>
                            
                                <a class="fl github" target="_blank" href="https://github.com/yanwenxi" title="github">github</a>
                            
                                <a class="fl QQ" target="_blank" href="http://www.webywx.com" title="QQ">QQ</a>
                            
                                <a class="fl wechat" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=278999494@qq.com" title="wechat">wechat</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/JS设计模式-设计模式/" style="font-size: 10px;">JS设计模式 设计模式</a> <a href="/tags/angular/" style="font-size: 10px;">angular</a> <a href="/tags/angular、html5/" style="font-size: 10px;">angular、html5</a> <a href="/tags/app-跨平台/" style="font-size: 10px;">app,跨平台</a> <a href="/tags/git-github/" style="font-size: 10px;">git github</a> <a href="/tags/js-Array/" style="font-size: 10px;">js Array</a> <a href="/tags/js-sea-js-模块化/" style="font-size: 10px;">js sea.js 模块化</a> <a href="/tags/js、变态题/" style="font-size: 10px;">js、变态题</a> <a href="/tags/js、跨域、document-domain/" style="font-size: 10px;">js、跨域、document.domain</a> <a href="/tags/js模块化、AMD、CMD、CommonJs/" style="font-size: 10px;">js模块化、AMD、CMD、CommonJs</a> <a href="/tags/js继承/" style="font-size: 10px;">js继承</a> <a href="/tags/life、意念/" style="font-size: 10px;">life、意念</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/mongoDB-数据库/" style="font-size: 10px;">mongoDB 数据库</a> <a href="/tags/node/" style="font-size: 10px;">node</a> <a href="/tags/react/" style="font-size: 10px;">react</a> <a href="/tags/web、前端/" style="font-size: 10px;">web、前端</a> <a href="/tags/window-history-html5/" style="font-size: 10px;">window.history html5</a> <a href="/tags/前后端分享/" style="font-size: 10px;">前后端分享</a> <a href="/tags/前端脚手架/" style="font-size: 10px;">前端脚手架</a> <a href="/tags/移动端、fixed/" style="font-size: 10px;">移动端、fixed</a> <a href="/tags/解构赋值-es6/" style="font-size: 10px;">解构赋值 es6</a> <a href="/tags/跨域、postMessage、html5/" style="font-size: 10px;">跨域、postMessage、html5</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.webywx.com">前端小站</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://ywxi.github.io/">web博客</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">运动健身、网络营销、web前端、喜欢接触新鲜事物、迎接新的挑战</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">Wenxi Yan</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/head.jpg" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">Wenxi Yan</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/Home">博客首页</a></li>
                
                    <li><a href="/">文章页</a></li>
                
                    <li><a href="/about">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=278999494@qq.com" title="mail">mail</a>
                    
                        <a class="github" target="_blank" href="https://github.com/yanwenxi" title="github">github</a>
                    
                        <a class="QQ" target="_blank" href="http://www.webywx.com" title="QQ">QQ</a>
                    
                        <a class="wechat" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=278999494@qq.com" title="wechat">wechat</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-js-modules-compare" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/13/js-modules-compare/" class="article-date">
      <time datetime="2016-12-13T08:46:32.000Z" itemprop="datePublished">2016-12-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/13/js-modules-compare/">JS模块规范对比：AMD，CMD，CommonJS</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>AMD,CMD,CommonJS是目前最常用的三种模块化书写规范。</p>
<h3 id="CommonJS-（CommonJs-Modules规范的简写）"><a href="#CommonJS-（CommonJs-Modules规范的简写）" class="headerlink" title="CommonJS （CommonJs Modules规范的简写）"></a>CommonJS （CommonJs Modules规范的简写）</h3><p><em>NodeJS就采用了CommonJS</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var clock = require(&apos;clock&apos;);</div><div class="line">clock.start();</div></pre></td></tr></table></figure></p>
<p>　　第二行clock.start()，在第一行require(‘clock’)之后运行，因此必须等clock.js加载完成。也就是说，如果加载时间很长，整个应用就会停在那里等。</p>
<p>　　这对服务器端不是一个问题，因为所有的模块都存放在本地硬盘，可以同步加载完成，等待时间就是硬盘的读取时间。但是，对于浏览器，这却是一个大问题，因为模块都放在服务器端，等待时间取决于网速的快慢，可能要等很长时间，浏览器处于”假死”状态。</p>
<p>　　因此，浏览器端的模块，不能采用”同步加载”（synchronou），只能采用”异步加载”（asynchronous）。这就是AMD规范CMD规范诞生的背景。</p>
<p>　　CommonJs是同步加载模块，这种同步机制应用到浏览器中就会出现问题了，例如加载速度啥的（浏览器同步加载模块会导致性能、可用性、调试和跨域访问等问题），Commonjs是一个更偏向于服务器端的规范。当然你也可以把它用在浏览器里边。Node.js采用了这个规范。 根据CommonJS规范，一个单独的文件就是一个模块。加载模块使用require方法，该方法读取一个文件并执行，最后返回文件内部的exports对象。</p>
<h3 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h3><p>　　AMD，即 (Asynchronous Module Definition)，这种规范是异步的加载模块，requireJs应用了这一规范。先定义所有依赖，然后在加载完成后的回调函数中执行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">require([module], callback);</div></pre></td></tr></table></figure></p>
<p>用AMD写上一个模块：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">require([&apos;clock&apos;],function(clock)&#123;</div><div class="line">  clock.start();</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>　　AMD虽然实现了异步加载，但是开始就把所有依赖写出来是不符合书写的逻辑顺序的，能不能像commonJS那样用的时候再require，而且还支持异步加载后再执行呢？</p>
<h3 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h3><p>　　CMD (Common Module Definition), 是seajs推崇的规范，CMD则是依赖就近，用的时候再require。它写起来是这样的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">define(function(require, exports, module) &#123;</div><div class="line">   var clock = require(&apos;clock&apos;);</div><div class="line">   clock.start();</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>　　AMD和CMD最大的区别是对依赖模块的执行时机处理不同，而不是加载的时机或者方式不同，二者皆为异步加载模块。<br>　　AMD依赖前置，js可以方便知道依赖模块是谁，立即加载；而CMD就近依赖，需要使用把模块变为字符串解析一遍才知道依赖了那些模块，这也是很多人诟病CMD的一点，牺牲性能来带来开发的便利性，实际上解析模块用的时间短到可以忽略。<br>　　对于依赖的模块，AMD 是提前执行，CMD 是延迟执行。CMD 推崇依赖就近，AMD 推崇依赖前置。CMD 推崇 as lazy as possible.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js模块化、AMD、CMD、CommonJs/">js模块化、AMD、CMD、CommonJs</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-cross-app" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/13/cross-app/" class="article-date">
      <time datetime="2016-12-13T05:17:45.000Z" itemprop="datePublished">2016-12-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/13/cross-app/">跨平台APP的构建方式</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>　　“一次构建，多处运行”，跨平台APP带着这股风潮把火烧到了前端，为开发者带来无尽的遐想。现有的流行跨平台框架有以下:</p>
<h3 id="1-基于单WebView的开发框架。"><a href="#1-基于单WebView的开发框架。" class="headerlink" title="1. 基于单WebView的开发框架。"></a>1. 基于单WebView的开发框架。</h3><p>　　开发者可以使用现有的最新web技术，开发出单页面web应用。同时利用JSBridge，又能获取原生的API，从而使web应用具有了原生应用的功能。Cordova+IONIC可以说是这个潮流的代表，也是跨平台APP的先锋。然而这类跨平台应用的缺点是不流畅，在安卓手机上体验较差。</p>
<h3 id="2-Hybrid方向。"><a href="#2-Hybrid方向。" class="headerlink" title="2. Hybrid方向。"></a>2. Hybrid方向。</h3><p>　　也就是原生应用配合HTML5技术，让APP具有了部分跨平台的功能。Hybrid也是现在各大互联网企业采用较多的跨平台开发方式。这类APP在体验上优于单WebView的APP，并且能够极大提高开发效率。然而这种方式离“一次构建，多处运行”的设想还是有很大距离，毕竟依然需要针对不同的移动平台进行原生开发。</p>
<h3 id="3-使用Javascript开发纯原生应用。"><a href="#3-使用Javascript开发纯原生应用。" class="headerlink" title="3. 使用Javascript开发纯原生应用。"></a>3. 使用Javascript开发纯原生应用。</h3><p>　　既然单WebView性能有缺憾，Hybrid技术栈又比较高，那么Javascript开发纯原生应用就孕育而生。这个方向的代表有<a href="https://facebook.github.io/react-native/" target="_blank" rel="external">ReactNative</a>, <a href="http://alibaba.github.io/weex/" target="_blank" rel="external">Weex</a>和<a href="https://www.nativescript.org/" target="_blank" rel="external">Nativescript</a>。</p>
<p>　　和ReactNative相比，Nativescript最大的特点是可以获得100%的原生API。也就是说，开发者可以通过Javascript获取和原生开发语言同样多的原生接口。通过例子可以体会到“获取所有原生API”带来的巨大好处。NativeScript是一款使用JavaScript语言来构建跨平台原生移动应用的开源框架，支持iOS、Android和Windows Phone。<br>　　使用Nativescript和Angular2可以很高效地构建跨平台APP！！！<br>    NativeScript一个缺点：无法与原生项目融合，即你只能纯写个NativeScript的应用，不可能把它抽离出来作为某原生应用的一部分来出现。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/app-跨平台/">app,跨平台</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-postMessage" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/13/postMessage/" class="article-date">
      <time datetime="2016-12-13T02:23:36.000Z" itemprop="datePublished">2016-12-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/13/postMessage/">跨域之HTML5 postMessage</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>　　先了解下什么是同源策略，简单来说，协议+域名+端口三者必须相同，若有一个不同，即为跨域！<br>　　相关图解如下：<br><img src="http://oi28tswuq.bkt.clouddn.com/images/corssDomain.png" alt=""></p>
<p>　　HTML5中最酷的新功能之一就是 <em>跨文档消息传输Cross Document Messaging</em>。下一代浏览器都将支持这个功能：Chrome 2.0+、Internet Explorer 8.0+, Firefox 3.0+, Opera 9.6+, 和 Safari 4.0+ 。 Facebook已经使用了这个功能，用postMessage支持基于web的实时消息传递。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">otherWindow.postMessage(message, targetOrigin);</div></pre></td></tr></table></figure></p>
<p>otherWindow: 对接收信息页面的window的引用。可以是页面中iframe的contentWindow属性；window.open的返回值；通过name或下标从window.frames取到的值。<br>message: 所要发送的数据，string类型。<br>targetOrigin: 用于限制otherWindow，“*”表示不作限制</p>
<p>a.com/index.html中的代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;iframe id=&quot;ifr&quot; src=&quot;b.com/index.html&quot;&gt;&lt;/iframe&gt;</div><div class="line">&lt;script type=&quot;text/javascript&quot;&gt;</div><div class="line">window.onload = function() &#123;</div><div class="line">    var ifr = document.getElementById(&apos;ifr&apos;);</div><div class="line">    var targetOrigin = &apos;http://b.com&apos;;  // 若写成&apos;http://b.com/c/proxy.html&apos;效果一样</div><div class="line">                                        // 若写成&apos;http://c.com&apos;就不会执行postMessage了</div><div class="line">    ifr.contentWindow.postMessage(&apos;I was there!&apos;, targetOrigin);</div><div class="line">&#125;;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<p>b.com/index.html中的代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;script type=&quot;text/javascript&quot;&gt;</div><div class="line">    window.addEventListener(&apos;message&apos;, function(event)&#123;</div><div class="line">        // 通过origin属性判断消息来源地址</div><div class="line">        if (event.origin == &apos;http://a.com&apos;) &#123;</div><div class="line">            alert(event.data);    // 弹出&quot;I was there!&quot;</div><div class="line">            alert(event.source);  // 对a.com、index.html中window对象的引用</div><div class="line">                                  // 但由于同源策略，这里event.source不可以访问window对象</div><div class="line">        &#125;</div><div class="line">    &#125;, false);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/跨域、postMessage、html5/">跨域、postMessage、html5</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-document-domain" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/13/document-domain/" class="article-date">
      <time datetime="2016-12-13T01:54:28.000Z" itemprop="datePublished">2016-12-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/13/document-domain/">js设置document.domain实现跨域的相关注意事项</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>　　对于主域相同而子域不同的例子，可以通过设置document.domain的办法来解决。具体的做法是可以在<a href="http://www.a.com/a.html和http://script.a.com/b.html两个文件中分别加上document.domain" target="_blank" rel="external">http://www.a.com/a.html和http://script.a.com/b.html两个文件中分别加上document.domain</a> = ‘a.com’；<br>　　本文实例分析了js设置document.domain实现跨域的注意点,仅供参考，具体分析如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">　　document.domain</div></pre></td></tr></table></figure></p>
<p>　　用来得到当前网页的域名。<br>　　比如在控制台输入：<br>　　代码如下:<br>　　<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">console.log(document.domain);//www.webywx.com</div></pre></td></tr></table></figure></p>
<p>　　我们也可以给document.domain属性赋值，不过是有限制的，你只能赋成当前的域名或者基础域名。<br>　　例如：代码如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">document.domain=&quot;webywx.com&quot;;</div><div class="line">document.domain=&quot;www.webywx.com&quot;;</div></pre></td></tr></table></figure></p>
<p>　　上面的赋值都是成功的，因为www.webywx.com是当前的域名，而webywx.com是基础域名。<br>　　但是下面的赋值就会出来”参数无效”的错误：<br>　　<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">　　document.domain=&quot;yanwenxi.site&quot;</div><div class="line">document.domain=&quot;www.yanwenxi.site&quot;</div></pre></td></tr></table></figure></p>
<p>　　因为yanwenxi.site与www.yanwenxi.site不是当前的域名也不是当前域名的基础域名，所以会有参数错误出现。<br>　　这是为了防止有人恶意修改document.domain来实现跨域偷取数据。</p>
<h3 id="利用document-domain-实现跨域："><a href="#利用document-domain-实现跨域：" class="headerlink" title="利用document.domain 实现跨域："></a>利用document.domain 实现跨域：</h3><p>　　<em>前提条件</em>：这两个域名必须属于同一个基础域名!而且所用的协议，端口都要一致，否则无法利用document.domain进行跨域<br>　　Javascript出于对安全性的考虑，而禁止两个或者多个不同域的页面进行互相操作。<br>　　相同域的页面在相互操作的时候不会有任何问题。<br>　　比如在：aaa.com的一个网页(a.html)里面 利用iframe引入了一个bbb.com里的一个网页(b.html)。<br>　　这时在a.html里面可以看到b.html里的内容，但是却不能利用javascript来操作它。因为这两个页面属于不同的域，在操作之前，js会检测两个页面的域是否相等，如果相等，就允许其操作，如果不相等，就会拒绝操作。<br>　　这里不可能把a.html与b.html利用JS改成同一个域的。因为它们的基础域名不相等。(强制用JS将它们改成相等的域的话会报跟上面一样的”参数无效错误。”)<br>　　所以如果在a.html里引入aaa.com里的另一个网页，是不会有这个问题的，因为域相等。<br>　　有另一种情况，两个子域名：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">　　aaa.xxx.com</div><div class="line">　　bbb.xxx.com</div></pre></td></tr></table></figure></p>
<p>　　aaa里的一个网页(a.html)引入了bbb 里的一个网页(b.html)，<br>　　这时a.html里同样是不能操作b.html里面的内容的。<br>　　因为document.domain不一样，一个是aaa.xxx.com，另一个是bbb.xxx.com。<br>　　这时我们就可以通过Javascript，将两个页面的domain改成一样的，<br>　　需要在a.html里与b.html里都加入：<br>　　<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">　　document.domain = &quot;xxx.com&quot;;</div></pre></td></tr></table></figure></p>
<p>　　这样这两个页面就可以互相操作了。也就是实现了同一基础域名之间的”跨域”。<br>　　备注：这种方式适用于{www.webywx.com, webywx.com, script.webywx.com, css.webywx.com}中的任何页面相互通信。某一页面的domain默认等于window.location.hostname。主域名是不带www的域名，例如webywx.com，主域名前面带前缀的通常都为二级域名或多级域名，例如www.a.com其实是二级域名.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js、跨域、document-domain/">js、跨域、document.domain</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-biantaiti" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/12/biantaiti/" class="article-date">
      <time datetime="2016-12-12T14:26:47.000Z" itemprop="datePublished">2016-12-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/12/biantaiti/">你js这么牛比，你知道++[[]][+[]]+[+[]]的结果么？</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>　　首先，问这个问题的人是个天才，他怎么会遇到这样的一个问题。其次，回答这个问题的人更是一个天才，我难以想象他会回答这个问题，更难以想象的是，他的回答是如此的详细和丰富和完整，真正称得上诲人不倦。<br>　　既然遇到了这个问题，我们不妨也跟着提高一下。<br>　　这是一个Javascript语言题目，一个完全有效的等式，不信自己可以试一下，下面看看高人的题解：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">++[[]][+[]]+[+[]]</div></pre></td></tr></table></figure></p>
<p>　　如果把这段表达式拆分开来，它相等于：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">++[[]][+[]]</div><div class="line">+</div><div class="line">[+[]]</div></pre></td></tr></table></figure></p>
<p>　　在JavaScript里，+[] === 0 是完全正确的。 + 会把一些字符转化成数字，在这里，这个式子会变成 +”” 或 0。<br>　　因此，我们可以简化一下(++ 比 + 有更高的优先级)：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">++[[]][0]</div><div class="line">+</div><div class="line">[0]</div></pre></td></tr></table></figure></p>
<p>　　因为 [[]][0] 的意思是：获取 [[]] 的第一个元素，这就得出了下面的结果：</p>
<p>[[]][0] 返回内部数组 ([])。根据语言规范，我们说 [[]][0] === [] 是不正确的，但让我们把这个内部数组称作 A，以避免错误的写法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">++[[]][0] == A + 1， 因为 ++ 的意思是“加一”。</div><div class="line">++[[]][0] === +(A + 1)；换句话说，你得到的永远是个数值( +1 并不一定得到的是个数值，但 ++ 一定是)。</div></pre></td></tr></table></figure></p>
<p>　　同样，我们可以把这一堆代码简化的更清晰。让我们把 A 换回成 [] :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">+([] + 1)</div><div class="line">+</div><div class="line">[0]</div></pre></td></tr></table></figure></p>
<p>　　在JavaScript里，这也是正确的：[] + 1 === “1”，因为 [] == “” (这相当于一个空的数组的内部元素连接)，于是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">+([] + 1) === +(“” + 1)，并且</div><div class="line">+(“” + 1) === +(“1”)，并且</div><div class="line">+(“1”) === 1</div></pre></td></tr></table></figure></p>
<p>　　让我们再次简化一下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">1</div><div class="line">+</div><div class="line">[0]</div></pre></td></tr></table></figure></p>
<p>　　同样，在Javascript里，这是正确的：[0] == “0”，因为这是相当于一个有一个元素的数组的内部元素的连接。各元素会使用，分隔。当只有一个元素时，你可以推论出这个过程的结果就是它自身的第一个元素。</p>
<p>　　所以，最终我们得到(数字 + 字符串 = 字符串)：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">1</div><div class="line">+</div><div class="line">&quot;0&quot;</div><div class="line">=== &quot;10&quot; // 耶！</div></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js、变态题/">js、变态题</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-angular-html5" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/12/angular-html5/" class="article-date">
      <time datetime="2016-12-12T14:04:54.000Z" itemprop="datePublished">2016-12-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/12/angular-html5/">让AngularJS指令符合html5规范</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>　　AngularJS,是Google开源的一款JavaScript MVVM框架，弥补了HTML在构建应用方面的不足，其通过使用指令（directives）结构来扩展HTML的属性，使开发者可以使用HTML来声明动态内容，从而使得Web开发和测试工作变得更加容易。</p>
<p>　　在学习中无意间看到有人说自定义指令如果想符合HTML5规范，可以加上data-<em>或者x-</em>前缀，对指令本身不影响，我顺便也试了下默认指令，发现ng-app、ng-model、ng-bind这类默认指令也可以直接加上data-*的前缀，而且完全不用配置，不影响功能。</p>
<p>　　所以，为了遵循HTML5规范，我们也可以使用data-ng-app、data-ng-model、data-ng-bind这样的属性来使用AngularJS的默认指令了。</p>
<p>　　最后来验证一下：原程序里面是这样写的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var ngAttrPrefixes = [&apos;ng-&apos;, &apos;data-ng-&apos;, &apos;ng:&apos;, &apos;x-ng-&apos;];</div></pre></td></tr></table></figure></p>
<p>　　所以说，ng-、data-ng-、ng:、x-ng-，都是可以生效的。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/angular、html5/">angular、html5</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-data-compare" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/10/data-compare/" class="article-date">
      <time datetime="2016-12-10T03:22:45.000Z" itemprop="datePublished">2016-12-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/10/data-compare/">非关系型数据库和关系型数据库比较</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="关系型数据库的特点"><a href="#关系型数据库的特点" class="headerlink" title="关系型数据库的特点"></a>关系型数据库的特点</h3><p><img src="http://oi28tswuq.bkt.clouddn.com/images/relative.png" alt="database-compare"><br>常见的关系型数据库:Microsoft SQLServer,   Oracle, MySQL，  Microsoft Access.<br>Not Only SQL简称NoSQL，泛指非关系型的数据库。<br>常见NoSQL有那些？MongoDB,Hbase（HadoopDatabase） ,Redis.</p>
<h3 id="Nosql数据库的分类："><a href="#Nosql数据库的分类：" class="headerlink" title="Nosql数据库的分类："></a>Nosql数据库的分类：</h3><p><img src="http://oi28tswuq.bkt.clouddn.com/images/Nosql.png" alt="Nosql"></p>
<h2 id="NoSQL的优点-缺点"><a href="#NoSQL的优点-缺点" class="headerlink" title="NoSQL的优点/缺点"></a>NoSQL的优点/缺点</h2><h3 id="优点"><a href="#优点" class="headerlink" title="优点:"></a>优点:</h3><ul>
<li>高可扩展性</li>
<li>分布式计算</li>
<li>低成本</li>
<li>架构的灵活性，半结构化数据</li>
<li>没有复杂的关系<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点:"></a>缺点:</h3></li>
<li>没有标准化</li>
<li>有限的查询功能（到目前为止）</li>
<li>最终一致性是不直观的程序 </li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mongoDB-数据库/">mongoDB 数据库</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-docker" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/04/docker/" class="article-date">
      <time datetime="2016-12-04T02:47:19.000Z" itemprop="datePublished">2016-12-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/04/docker/">使用Docker快速发布nodejs应用</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>使用docker发布一个nginx+nodejs(express,koa)项目，然后使用jenkins进行简单地持续集成发布工作，nodejs配合docker和jenkins可以更加方便地管理我们的应用！<br>对docker的理解：未完待更新。。。临时有事。。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-window-back-disabled" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/11/13/window-back-disabled/" class="article-date">
      <time datetime="2016-11-13T10:03:29.000Z" itemprop="datePublished">2016-11-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/13/window-back-disabled/">使浏览器后退按钮失效及HTML5-window.history</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="防止页面后退（使浏览器后退按钮失效）"><a href="#防止页面后退（使浏览器后退按钮失效）" class="headerlink" title="防止页面后退（使浏览器后退按钮失效）"></a>防止页面后退（使浏览器后退按钮失效）</h3><p>　　<em>原理</em>：用新页面的URL替换当前的历史纪录，这样浏览历史记录中就只有一个页面，后退按钮永远失效。</p>
<p>　注：history.go和history.back（包括用户按浏览器历史前进后退按钮）触发，页面由于使用pushState修改了history，会触发popstate事件。【代码如下】<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">       &lt;script type=&quot;text/javascript&quot;&gt;</div><div class="line">            jQuery(document).ready(function ($) &#123;</div><div class="line">                if (window.history &amp;&amp; window.history.pushState) &#123;</div><div class="line">    　　　　$(window).on(&apos;popstate&apos;, function () &#123;</div><div class="line">      　　    window.history.forward(1);</div><div class="line">    　　　　&#125;);</div><div class="line">  　　　　&#125;</div><div class="line">　　　　&#125;);</div><div class="line">　　&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<h3 id="其中涉及到的方法详细介绍："><a href="#其中涉及到的方法详细介绍：" class="headerlink" title="其中涉及到的方法详细介绍："></a>其中涉及到的方法详细介绍：</h3><ol>
<li><p>window.history：表示window对象的历史记录</p>
</li>
<li><p>历史记录的前进和后退</p>
<p> window. history.forward() — 此方法加载历史列表中的下一个 URL，同浏览器中点击向前按钮；<br> window. history.back() — 此方法加载历史列表中的前一个 URL，同浏览器中点击后退按钮。</p>
<ul>
<li>可移动到指定历史记录点：<br>通过指定一个相对于当前页面位置的数值，你可以使用 go() 方法从当前会话的历史记录中加载页面,（当前页面位置索引值为0，上一页就是-1，下一页为1）  如：<br>要后退一页（相当于调用back()）： window.history.go(-1);<br>  　　　　<br>向前移动一页（相当于调用forward()）：window.history.go(1);<br>   　　　　<br>　   window.history.length：可以查看length属性值，可知道历史记录栈中共有多少个记录点。</li>
</ul>
</li>
<li><p>操作历史记录点</p>
<p> HTML5的新API扩展了window.history，可实现存储、替换当前历史记录点，以及监听历史记录点。</p>
</li>
</ol>
<p>　　1、存储、替换当前历史记录点<br>        创建当前历史记录点pushState(state, title, url)：创建（添加）一个新的history实体，<br>                    state：状态对象，记录历史记录点的额外对象（要跳转的URL），可以为空；<br>                    title：页面标题，目前所有浏览器都不支持；<br>                    url：可选的url，浏览器不会检查url是否存在，只改变url，url必须同域。<br>                    window.history.pushState(json,””,”<a href="http://www.qingdou.me/post-1.html”" target="_blank" rel="external">http://www.qingdou.me/post-1.html”</a>);<br>        替换当前历史记录点replaceState()：修改当前的history实体，不会新增。<br>                    类似replace(url)，要更新当前历史记录的状态对象或URL时，使用replaceState()方法会更合适。</p>
<p>　　2 、监听历史记录点onpopstate()</p>
<p>　　　  当history实体被改变时，popstate事件将会发生； onhashchange()可监听URL的hash部分。</p>
<pre><code>3、读取现有state

   当页面加载时，它可能会有一个非空的state对象。当页面重新加载，页面将收到onload事件，但不会有popstate事件。
   然而，如果你读取history.state属性，将在popstate事件发生后得到这个state对象。
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/window-history-html5/">window.history html5</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-arraydeapply" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/11/13/arraydeapply/" class="article-date">
      <time datetime="2016-11-13T09:18:52.000Z" itemprop="datePublished">2016-11-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/13/arraydeapply/">js 数组中自定义属性的应用</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>首先要说明的是：数组也是一个object,所以也可以添自定义属性。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var arr = [];即可表示一个完整的数组</div><div class="line">console.log(arr.length) //0</div></pre></td></tr></table></figure></p>
<p>就是说数组本身是有属性的，这样一来，我们就可以添加自己需要的属性了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">arr.load = false;//查看load</div><div class="line">console.log(arr.load);//false</div><div class="line">arr.load = true; //修改load的值</div><div class="line">console.log(arr.load);//true</div></pre></td></tr></table></figure></p>
<p>有人会说，这有什么用？就是一个自定义属性而已。请看下面内容便知道了。</p>
<p>前端在通过ajax获取后台数据时，列表通常返回数组形式<br>前台展示列表：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//默认值</div><div class="line">var showList = [];</div><div class="line">ajax获取值：</div><div class="line">//获取前，页面会提示正在获取数据</div><div class="line">ajax(url,function(data)&#123;</div><div class="line">    showList = data.list;</div><div class="line">    //获取到数据后，会返回这个list,此时，如果list是空的，那么，showList就没有发生变化</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>当返回为空时，那么该如何通过判断showList.length的变化来修改页面提示信息呢？（正在获取数据…/暂无数据）,此时就需要给showList添加一个自定义属性load,<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var showList = [];</div><div class="line">showList.load = false;</div><div class="line">ajax(url,function(data)&#123;</div><div class="line">    showList.load = true;</div><div class="line">    showList = data.list;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>前台就可以根据load状态进行判断提示了（showList.load?’正在获取数据…’:’暂无数据’）</p>
<p>技巧虽小，但是有时候可以帮大忙。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js-Array/">js Array</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2016 Wenxi Yan
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >用户到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
</body>
</html>