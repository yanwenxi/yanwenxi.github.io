---
title: 微信小程序简单介绍
date: 2017-02-06 10:38:24
tags: wxapp
---

在语言方面，看上去小程序几乎重新定义了一套标准。但是实际上，它们与「前端三件套」 ——HTML、 CSS 和 JavaScript——差不太多。
#### 对比一下小程序开发语言和「前端三件套」有什么异同点：
一、 HTML 与 WXML：两者差异比较大，如果之前没有接触过Android 开发，可能会觉得有些头疼。事实上， WXML 更像是 Android 开发中的界面 XML ᧿述文件，更适合于程序界
面的构建；而 HTML 则倾向于文章的展示（这与 HTML 的历史有关），以及互联网页面的构建。
二、 WXSS 与 CSS：两者在语言上几乎没有差别，可以直接通用。
三、 JS 文件：小程序的 JS 文件与前端开发使用的 JS 几乎没有区别，小程序的 JS 新增了微信的一些 API 接口，并去除了一些不必要的功能（如 DOM）。

小程序开发需要学习的语言主要有：
1. 微信标记语言  （weixin marked language,   wxml）
2. 微信样式表（weixin style sheet, wxss ）
3. javascript


小程序的界面并非是一个网页，而是一个应用界面，以往网页前端常见的```<div>、<a>```等标签都不复存在，网页前端开发人员需要适应wxml的逻辑和写法。

小程序使用了rpx（responsive pixel）作为尺寸单位（保证不同分辨率设备的元素正常显示），开发人员需要了解rpx与各种长度单位的换算比例。

#### 为什么需要动态单位和 rpx？

我们都知道，小程序是一个跨系统的平台。这就意味着，小程序会在不同的设备上运行，但不同设备的分辨率会有差异。
在小程序中，如何在分辨率不同的设备上保证视觉元素的正常显示？这就需要名为 rpx 的动态尺寸单位。

在显示屏上，每一个画面都是由无数的点阵形成的。这个点阵中，每一个点叫做像素，就是 pixel（缩写为 px）。这对于很多人来说都是常识。

但是，随着 Retina 屏幕（即「视网膜屏」）的推出和高分屏的普及，1 px 所能代表的实际长度并非是一成不变的。对于跨平台、跨设备的应用来说，单纯使用 px 并不能满足需要。因为，这很难保证小程序的元素，能在不同设备上正常显示——同样 px 尺寸的元素，在高分屏上显示会明显要比在低分屏显得更小。因此，我们需要一个动态的长度单位。这个单位通过对不同屏幕的分辨率进行调整和适配，保证相同元素在不同屏幕上的展示是正常的。

<font color=red face=“黑体”>苹果和 Google 对此都有相应的措施：</font>

1.由于苹果对高分屏的优化良好，所以在 iOS 上，代码中的 1 px 所代表的实际像素数会根据不同设备动态调整，开发者不需要进行二次换算。
2.由于 Android 设备碎片化严重，Google 不得不建立了一个新的名叫「density-independent pixel（密度无关像素，缩写为 dp）」的尺寸单位，以适应不同分辨率屏幕的尺寸换算。

微信也为小程序提供了一个动态单位解决方案：它就是 responsive pixel（动态像素），简称 rpx。

<font color='red'>Pixel与rpx、dp之间的换算</font>

动态单位与 px 换算的基本概念是：选择一个分辨率作为基准，在基准分辨率中，一个像素点显示有多长，在其他屏幕上会显示同样长度。
例如，dp 与 px 换算公式是：dp = px * (目标设备 dpi 分辨率 / 160)。
但微信小程序的 rpx 换算方式，会与其他动态单位的换算方法有些出入。微信官方提供的换算方式更「傻瓜」一些：rpx = px * (目标设备宽 px 值 / 750)。

<font color=red face=“黑体”>例如：</font>

目标设备的宽度如果是 375px，按照 750rpx 进行换算，则等于 1rpx = 0.5px
目标设备的宽度如果是 1125px，换算后 1rpx = 1.5px

没错，如果将微信小程序放到平板电脑上运行，屏幕的宽度 px 值有可能会变化（横竖屏、分屏模式等等）。这时候，再以宽度为基准，就会出现元素显示不正确的问题。从这一点可以看出，微信团队目前并不希望将小程序扩展到手机以外的设备中。因此，开发者暂时可以专注于提高小程序在手机上的体验，无需担心多尺寸屏幕带来的适配问题。

<font color=red face=“黑体”>那能不能直接让 rpx 和 dp 进行互换呢？当然不能！</font>

dp 是以屏幕分辨率为基准的动态单位，而 rpx 是以长度为基准的动态单位。就像「米」和「平方厘米」不能互换一样，dp 和 rpx 两者也是不能直接进行互换的，除非微信官方将 rpx 设定为分辨率基准而非长度基准。

#### 设计师该怎么做？
由于微信使用了 rpx 动态单位，设计稿的尺寸单位也推荐使用 rpx。

那么问题来了，如果要改用 rpx 单位，以什么尺寸的屏幕作为设计稿标准会比较合适呢？

在微信官方的文档中，我们看到下面这样一句话：

在 iPhone 6 上，屏幕宽度为 375px，共有 750 个物理像素，则 750rpx = 375px = 750 物理像素，1rpx = 0.5px = 1 物理像素。

开发微信小程序时设计师可以用 iPhone 6 作为视觉稿的标准。
也就是说，设计师在设计小程序时，可以这样做：
直接以 iPhone 6 的屏幕尺寸（375×667）用作视觉稿尺寸，1 px = 0.5 rpx；
以 1 px = 1 rpx 的标准，将设计稿尺寸设定为 750×1334。
在将设计稿转交给开发人员之前，设计师需要清楚地描述设计稿尺寸和单位换算标准等，以便开发人员快速实现界面效果。

